<!DOCTYPE html>
<head>
	<title>Indoor vs. Outdoor temps</title>
	<script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.9/d3.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/nvd3/1.1.15-beta/nv.d3.js"></script>
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/nvd3/1.1.15-beta/nv.d3.css"></link>
	<script>
		var dateFormat = function(d) { return d3.time.format('%m/%d/%Y')(new Date(d)) };

		d3.csv("../boise-weather.csv")
			.row(function(d) { return {
				date: new Date(d['Time']).getTime(),
				indoor: +d['Indoor Temperature(F)'],
				outdoor: +d['Outdoor Temperature(F)']
			}})
			.get(function(error, rows)
			{
				// Now with 400% less sucking the life out of my computer
				rows = rows.filter(function(d,i) { return i % 4 == 0 });

				nv.addGraph(function() {
					var chart = nv.models.lineWithFocusChart()
				 		.x(function(d) { return d[0] })
                  		.y(function(d) { return d[1] })

					chart.xAxis.tickFormat(dateFormat);
					chart.x2Axis.tickFormat(dateFormat);

					d3.select('#chart svg')
						.datum([
							{key:'Indoor', values: rows.map(function(d) { return [d.date, d.indoor] })},
							{key:'Dutdoor', values: rows.map(function(d) { return [d.date, d.outdoor] })}
						])
						.call(chart);

					nv.utils.windowResize(chart.update);
					return chart;
				});
			}
		);

	</script>
</head>
<body>
	<div id="chart" style="height:400px">
		<svg></svg>
	</div>
</body>
</html>